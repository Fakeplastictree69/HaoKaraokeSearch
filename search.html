<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>Karaoke Search</title>
<style>
body {
  font-family: sans-serif;
  padding: 20px;
}
input {
  width: 90%;
  font-size: 18px;
  padding: 10px;
}
.result {
  margin-top: 10px;
  padding: 8px;
  border-bottom: 1px solid #ccc;
}
a {
  text-decoration: none;
  color: #0066cc;
}
</style>
</head>

<body>

<h2>ğŸ¤ Karaoke æœå°‹</h2>

<input id="q" placeholder="è¼¸å…¥æ­Œåï¼ˆæ—¥æ–‡ / ç¾…é¦¬æ‹¼éŸ³ï¼‰">

<div id="results"></div>

<script>
const DATA_URL = "https://github.com/Fakeplastictree69/HaoKaraokeSearch/releases/download/v1.0/data.json";

let songs = [];

fetch(DATA_URL)
  .then(r => r.text())
  .then(t => {
    const lines = t.trim().split("\n");
    songs = lines.map(l => {
      try { return JSON.parse(l); } catch { return null; }
    }).filter(Boolean);
  });

function normalize(str) {
  return str
    .toLowerCase()
    .replace(/[ã‚¡-ãƒ³]/g, c => String.fromCharCode(c.charCodeAt(0) - 0x60))
    .replace(/[\s\-_.]/g, "");
}

document.getElementById("q").addEventListener("input", () => {
  const key = normalize(document.getElementById("q").value);
  const box = document.getElementById("results");
  box.innerHTML = "";

  if (!key) return;

  for (const s of songs) {
    const t = normalize(s.title || "");
    if (t.includes(key)) {
      const div = document.createElement("div");
      div.className = "result";
      div.innerHTML = `<b>${s.title}</b><br><a href="https://youtu.be/${s.id}" target="_blank">é–‹å•Ÿå½±ç‰‡</a>`;
      box.appendChild(div);
    }
  }
});
</script>

</body>
</html>
